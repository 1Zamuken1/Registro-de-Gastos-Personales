<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/assets/css/Dashboard.css">
    <link rel="stylesheet" href="../assets/css/nav-bar.css" />
    <title>Dashboard - Finanzas Personales</title>
    <!-- Bootstrap Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <!-- ApexCharts -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
</head>
<body>
    <!-- Barra lateral de navegación -->
    <div class="layout">
      <nav class="side-nav" id="nav-bar"></nav>
    <!-- HEADER -->
    <div class="header">
        <div class="header-left">
            <h1>Dashboard Finanzas</h1>
        </div>
        <div class="header-right">
            <div class="user-info">
                <div class="user-avatar">U</div>
                <span>Usuario</span>
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="main-content">
        <!-- ESTADÍSTICAS PRINCIPALES -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-card-header">
                    <div>
                        <div class="stat-number" id="ingresos-stat">$0</div>
                        <div class="stat-label">Total Ingresos</div>
                    </div>
                    <div class="stat-icon ingresos">
                        <i class="bi bi-arrow-up-circle"></i>
                    </div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-card-header">
                    <div>
                        <div class="stat-number" id="egresos-stat">$0</div>
                        <div class="stat-label">Total Egresos</div>
                    </div>
                    <div class="stat-icon egresos">
                        <i class="bi bi-arrow-down-circle"></i>
                    </div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-card-header">
                    <div>
                        <div class="stat-number" id="saldo-stat">$0</div>
                        <div class="stat-label">Saldo Neto</div>
                    </div>
                    <div class="stat-icon saldo">
                        <i class="bi bi-calculator"></i>
                    </div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-card-header">
                    <div>
                        <div class="stat-number" id="ahorros-stat">$0</div>
                        <div class="stat-label">Total Ahorros</div>
                    </div>
                    <div class="stat-icon ahorros">
                        <i class="bi bi-piggy-bank"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- GRÁFICOS PRINCIPALES -->
        <div class="charts-section">
            <div class="chart-container">
                <div class="chart-title">Balance Mensual</div>
                <div id="chartBalance"></div>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Distribución de Ahorros</div>
                <div id="chartAhorros"></div>
            </div>
        </div>

        <!-- BOTONES DE CONTROL -->
        <div class="controls-section">
            <button type="button" class="control-btn">
                <i class="bi bi-piggy-bank"></i> Gestionar Ahorros
            </button>
            <button type="button" class="control-btn">
                <i class="bi bi-arrow-up-circle"></i> Agregar Ingresos
            </button>
            <button type="button" class="control-btn">
                <i class="bi bi-arrow-down-circle"></i> Registrar Egresos
            </button>
        </div>

        <!-- GRÁFICO DE GASTOS -->
        <div class="chart-container" style="margin-bottom: 30px;">
            <div class="chart-title">Gastos por Categoría</div>
            <div id="treemap-gastos"></div>
        </div>

        <!-- ALERTAS Y RECORDATORIOS -->
        <div class="alerts-section">
            <div class="alert-card">
                <div class="alert-header">
                    <div class="alert-icon warning">
                        <i class="bi bi-exclamation-triangle"></i>
                    </div>
                    <div class="alert-title">Alerta de Gastos</div>
                </div>
                <div class="alert-content" id="alerta">
                    Cargando alertas...
                </div>
            </div>
            
            <div class="alert-card">
                <div class="alert-header">
                    <div class="alert-icon info">
                        <i class="bi bi-lightbulb"></i>
                    </div>
                    <div class="alert-title">Recomendación de Ahorro</div>
                </div>
                <div class="alert-content" id="recordatorio">
                    Cargando recomendaciones...
                </div>
            </div>
            
            <div class="alert-card">
                <div class="alert-header">
                    <div class="alert-icon success">
                        <i class="bi bi-chat-heart"></i>
                    </div>
                    <div class="alert-title">Mensaje Motivacional</div>
                </div>
                <div class="alert-content" id="mensaje">
                    Cargando mensaje...
                </div>
            </div>
        </div>
    </div>
     <!-- Scripts -->
     <!-- INCLUIR EL CHATBOT -->
    <script src="/chatBot/public/script.js"></script>
    <script>
        // Inicializar el chatbot cuando se cargue la página
        initChatBot({
            serverUrl: 'http://localhost:5500/chat' // Cambia esta URL por la de tu servidor
        });
        
        // Opcional: También puedes configurar el chatbot después
        document.addEventListener('DOMContentLoaded', function() {
            // Si necesitas cambiar la URL del servidor después
            // window.chatBot.setServerUrl('https://tu-servidor.com/chat');
            
            console.log('Vista de ahorros cargada con ChatBot');
        });
    </script>
    <script src="../assets/js/nav-bar.js"></script>
    <script src="/assets/js/Dashboard.js"></script>
</body>
</html>